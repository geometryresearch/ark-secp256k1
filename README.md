# ark-secp256k1

This repository contains an implementation of the [secp256k1 elliptic
curve](https://www.secg.org/sec2-v2.pdf) in
[arkworks](https://github.com/arkworks-rs).

At the time of writing, there are important notes about this codebase.

1. Do not use it in production. It has not been audited or thoroughly tested.
   The authors make no security guarantees about the code whatsoever.
2. The arkworks interfaces used to define this curve are from verson 0.3.0. See
   [`arkworks-rs/curves, tag
   v0.3.0`](https://github.com/arkworks-rs/curves/releases/tag/v0.3.0) for
   other curves defined this way.
3. This codebase depends on [a third-party
   fork](https://github.com/arkworks-rs/curves/releases/tag/v0.3.0) of the
   arkworks repositories. This is due to a bug in the canonical v0.3.0 which
   has to do with [deserialisation of 320-bit fields with 64 shaving
   bits](https://github.com/arkworks-rs/algebra/pull/442). While this bug has
   been fixed in [arkworks' unstable master branch], the curve and field
   definition interface for 0.3.0 differs from that of the master branch. As
   such, this repository will only be updated to the new interface when a new
   arkworks release is available.

## Definition of Fq

The file `fq.rs` was automatically generated by
[field_params_generator](https://github.com/geometryresearch/field_params_generator)
using the command:

```bash
sage run.sage -t fq.rs -f Fq -m 115792089237316195423570985008687907853269984665640564039457584007908834671663
```

## Definition of Fr

The file `fr.rs` was automatically generated by the same script using the
following command:

```bash
sage run.sage -t fr.rs -f Fr -m 115792089237316195423570985008687907852837564279074904382605163141518161494337
```

## Tests

To run tests, execute:

```bash
cargo test
```

These tests include:

1. Point exponentiation of the generator [using these test
   vectors](https://web.archive.org/web/20190724010836/https://chuckbatson.wordpress.com/2014/11/26/secp256k1-test-vectors/).
2. SEC1 encoding of 100 points, both compressed and uncompressed, against test
   vectors generated by `k256`.
3. Various test functions provided by `ark-algebra-test-templates`.
